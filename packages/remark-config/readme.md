<!--+ Warning: Content inside HTML comment blocks was generated by mdat and may be overwritten. +-->

<!-- title -->

# @envsa/remark-config

<!-- /title -->

<!-- badges -->

[![NPM Package @envsa/remark-config](https://img.shields.io/npm/v/@envsa/remark-config.svg)](https://npmjs.com/package/@envsa/remark-config)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

<!-- /badges -->

<!-- description -->

**Markdown and MDX linting for @envsa/shared-config.**

<!-- /description -->

## Overview

It's a shared [Remark](https://github.com/remarkjs/remark/blob/main/packages/remark-cli/readme.md#example-config-files-json-yaml-js) config for linting.

**See [`@envsa/shared-config`](https://www.npmjs.com/package/@envsa/shared-config) for the recommended single-package approach.**

## Setup

To use just this Remark config in isolation:

1. Install the `.npmrc` in your project root. This is required for correct PNPM behavior:

   ```sh
   pnpm dlx @envsa/repo-config --init
   ```

2. Add the package:

   ```sh
   pnpm add -D @envsa/remark-config
   ```

3. Add the starter `.remarkrc.js` and files to your project root, and add any customizations you'd like:

   ```sh
   pnpm exec remark-config --init
   ```

## Usage

The Remark binary should be picked up automatically by VS Code plugins.

You can call it directly, but it's recommended to use the script bundled with the shared config to invoke the remark lint rules through ESLint. The [`eslint-mdx`](https://github.com/mdx-js/eslint-mdx) plugin is used to bridge these rules into ESLint and the VS Code ESLint plugin.

Integrate with your `package.json` scripts as you see fit, for example:

```json
"scripts": {
  "lint": "pnpm remark . --quiet --frail"
}
```

### CLI

<!-- cli-help -->

#### Command: `remark-config`

Markdown and MDX linting for @envsa/shared-config.

Usage:

```txt
remark-config [<file|glob> ...]
```

| Option                   | Argument | Description                                                      |
| ------------------------ | -------- | ---------------------------------------------------------------- |
| `--init`<br>`-i`         |          | Initialize by copying starter config files to your project root. |
| `--print-config`<br>`-p` | `<path>` | Print the effective configuration at a certain path.             |
| `--help`<br>`-h`         |          | Print this help info.                                            |
| `--version`<br>`-v`      |          | Print the package version.                                       |

<!-- /cli-help -->

## Configuration

### Avoiding errors in non-git projects

The [remark-validate-links](https://github.com/remarkjs/remark-validate-links) looks for a git remote to validate relative link paths.

If your project is not a git repository, you will receive warning from remark via eslint:

```txt
Command failed: git remote -v
fatal: not a git repository (or any of the parent directories): .git
eslint(undefined-undefined)
```

To fix this, pass the `repository: false` option in your `.remarkrc.js` file:

```js
// .remarkrc.js
import sharedConfig, { overrideRules } from '@envsa/remark-config'

const localConfig = {
  ...sharedConfig,
  plugins: overrideRules(sharedConfig.plugins, [['remarkValidateLinks', { repository: false }]]),
}

export default localConfig
```

<!-- license -->

## License

[MIT](license.txt) Â© Liam Rella

<!-- /license -->
